<!DOCTYPE html>
<html>
<head>
    <meta name="ac:name" content="Table Layout 15"/>
    <meta name="ac:short-desc" content=""/>
    <meta name="ac:desc" content=""/>
    <script src="https://cdn.anychart.com/js/7.4.0/anychart-bundle.min.js"></script>
    
    <link rel="stylesheet" type="text/css" href="https://cdn.anychart.com/css/7.4.0/anychart-ui.min.css" />
    
    <style>
        html, body, #container {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<div id="container"></div>
<script>
anychart.onDocumentReady(function() {

  // set stage
  stage = anychart.graphics.create('container');

  // data
  var data = anychart.data.set([
    [Date.UTC(2013, 10), 98.6, 98.6, 95.3, 97.9, 99.0, 97.0, 96.1],
    [Date.UTC(2013, 11), 98.5, 98.9, 95.9, 98.4, 98.4, 97.9, 96.1],
    [Date.UTC(2014, 0),  98.5, 98.8, 96.7, 98.5, 99.1, 98.2, 96.0],
    [Date.UTC(2014, 1),  99.0, 98.3, 95.6, 98.8, 98.2, 98.9, 95.9],
    [Date.UTC(2014, 2),  99.2, 98.6, 96.8, 99.0, 98.2, 98.2, 95.7],
    [Date.UTC(2014, 3),  99.0, 98.7, 95.8, 99.3, 97.9, 98.7, 95.5],
    [Date.UTC(2014, 4),  99.3, 98.9, 96.3, 99.2, 98.6, 98.4, 95.0],
    [Date.UTC(2014, 5),  99.1, 98.3, 95.6, 99.4, 99.1, 98.5, 94.9],
    [Date.UTC(2014, 6),  99.0, 98.1, 95.4, 99.4, 98.4, 98.6, 94.8],
    [Date.UTC(2014, 7),  99.3, 99.0, 95.5, 99.5, 99.2, 98.5, 95.0],
    [Date.UTC(2014, 8),  99.5, 98.9, 96.7, 99.6, 99.2, 98.7, 94.8],
    [Date.UTC(2014, 9),  99.7, 99.3, 96.9, 99.7, 99.3, 98.8, 94.4],
  ]);

  var AcceptedAvailability = anychart.data.set([
    ['Network', 99],
    ['ERP', 98],
    ['Data Warehouse', 98],
    ['Web Site', 98],
    ['Email', 98],
    ['HR', 96],
    ['Problem Tracking', 93]
  ]);

  // create table
  var table = anychart.ui.table();
  var contents = [];

  var lineScale = createTightDTScale();

  for(var i= 0; i<7; i++){
    contents.push(
        [newLine(i),
        AcceptedAvailability.row(i)[0],
        newBullet(i),
        AcceptedAvailability.row(i)[1]]
    );
  }

  // set table content
  table.contents(contents);

  table.cellBorder('gray 0.2', 2);

  // set table container and initiate draw
  table.container(stage).draw();

  function createTightDTScale() {
    // removing gaps and ticks to make the line fill the horizontal space of the cell
    return anychart.scales.dateTime().minimumGap(0).maximumGap(0).ticks([]);
  }

  // create new line chart
  function newLine(i){
    var line = anychart.cartesian.series.line(data.mapAs({x: [0], value: [(i + 1)]}));

    // adjust visualization
    line.xScale(lineScale)
      .stroke('2 #000')
      .tooltip()
        .contentFormatter(function(e){
          var d = new Date(e.x);
          var options = {year: 'numeric', month: 'long'};
          var transformedDate =  d.toLocaleDateString('en-US', options);
          return transformedDate + '\n' + e.value + ' %';
      });
    return line;
  }

  // create new bullet chart
  function newBullet (i) {
    // we use common scales for charts in columns to make them comparable
    var bulletScale = anychart.scales.linear();
    // settings manual minimum and maximum to show the range we need.
    bulletScale.minimum(85).maximum(100);

    var bulletData = 0;
    for (var rowCounter = 0; rowCounter<(data.getRowsCount() - 1);rowCounter++){
      bulletData += data.row(rowCounter)[i+1];
    }
    //alert(bulletData/data.getRowsCount());
    var bullet = anychart.bullet([{'value': bulletData/(data.getRowsCount() - 1), 'type': 'line', gap: 0.4}]);
    bullet.range(0).from(AcceptedAvailability.row(i)[1]).to(100).fill('#ccc');
    bullet.scale(bulletScale);
    bullet.title().enabled(false);
    bullet.axis().enabled(false);
    bullet.background().enabled(true).stroke('#ccc').fill('#fff');
    bullet.padding(0);
    bullet.margin(10);
    return bullet;
  }
});
</script>
</body>
</html>