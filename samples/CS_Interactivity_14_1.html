<html>
<head>
  <meta name="x-cat-tags" content="anyChart"/>
    <meta charset="UTF-8"/>
    <meta name="tags" content="[]"/>
    <meta name="index" content="1000"/>
    <meta name="is-new" content="false"/>
    <script src="../anychart-bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.anychart.com/css/latest/anychart-ui.min.css"/>
    <script x-export="stage">anychart.onDocumentReady(function () {

    // set stage
    stage = anychart.graphics.create("container");

    // data
    var data = anychart.data.set([
        ["Velma", 10, "#AB3300", 4, 3, 7, 1, 0],
        ["Fred", 12, "#66A3FF", 2, 4, 3, 0, 0],
        ["Daphne", 18, "#570FBD", 2, 2, 3, 0, 0],
        ["Shaggy", 6, "#948F45", 1, 1, 4, 4, 0],
        ["Scooby", 46, "#784512", 1, 1, 2, 1, 46]
    ]);

    var pieTitle = "And who helped them";
    var pieSubTitle = "...";

    // map data for the each series
    var dataMapping = data.mapAs({x: [0], value: [1], fill: [2]});

    // chart type
    chart = anychart.column();
    markerChart = anychart.cartesian();
    markerChart.yAxis().enabled(true);
    markerChart.xAxis().enabled(true);
    markerChart.title("dfk");
    markerChart.enabled(false);

    // set data
    var series = chart.column(dataMapping); // set series data

    // chart title
    chart.title().useHtml(true);
    chart.title("<span style=\"color:#545f69; font-size: 18px;\">How many pieces of pizza have they eaten?</span><br><span style=\"color:#545f69; font-size: 10px\">Click on the bars.</span>");

    // enable legend
    chart.legend().enabled(false);

    // switching the select mode to multi
    chart.interactivity().selectionMode("multi-select");

    chart.bounds("0", "0", "50%", "100%");
    markerChart.bounds("50%", "0%", "50%", "100%");
    chart.padding().top(30);
    markerChart.padding().top(30);
    chart.padding().bottom(20);
    markerChart.padding().bottom(20);
    markerChart.yScale().minimum("-0.5");

    var markerVelmaDataMapping = data.mapAs({x: [0], value: [3]}); // Velmas pizza
    var markerVelma = markerChart.marker(markerVelmaDataMapping);
    markerVelma.stroke("none");
    markerVelma.fill("#AB3300");
    markerVelma.size(15);
    markerVelma.enabled(false);

    var markerFredDataMapping = data.mapAs({x: [0], value: [4]}); // Freds pizza
    var markerFred = markerChart.marker(markerFredDataMapping);
    markerFred.stroke("none");
    markerFred.fill("#66A3FF");
    markerFred.size(15);
    markerFred.enabled(false);

    var markerDaphneDataMapping = data.mapAs({x: [0], value: [5]}); // Daphnes pizza
    var markerDaphne = markerChart.marker(markerDaphneDataMapping);
    markerDaphne.stroke("none");
    markerDaphne.fill("#570FBD");
    markerDaphne.size(15);
    markerDaphne.enabled(false);

    var markerShaggyDataMapping = data.mapAs({x: [0], value: [6]}); // Shaggys pizza
    var markerShaggy = markerChart.marker(markerShaggyDataMapping);
    markerShaggy.stroke("none");
    markerShaggy.fill("#948F45");
    markerShaggy.size(15);
    markerShaggy.enabled(false);

    var markerScoobyDataMapping = data.mapAs({x: [0], value: [7]}); // Scoobys sausages
    var markerScooby = markerChart.marker(markerScoobyDataMapping);
    markerScooby.stroke("none");
    markerScooby.fill("#784512");
    markerScooby.size(15);
    markerScooby.enabled(false);

    chart.listenOnce("click", function () {
        markerChart.enabled(true);
    });

    chart.listen("click", function (evt) {
        var ind = evt.pointIndex;
        console.log(evt.pointIndex);
        switch (ind) {
            case 0:
                markerVelma.enabled(!markerVelma.enabled());
                break;
            case 1:
                markerFred.enabled(!markerFred.enabled());
                break;
            case 2:
                markerDaphne.enabled(!markerDaphne.enabled());
                break;
            case 3:
                markerShaggy.enabled(!markerShaggy.enabled());
                break;
            case 4:
                markerScooby.enabled(!markerScooby.enabled());
                break;
        }
    });
    markerChart.container(stage);
    markerChart.draw();
    
    // draw
    chart.container(stage);
    chart.draw();
});</script>
</head>
<body>
<div id="container" style="width: 100%; height: 100%"></div>
</body>
</html>
