<!DOCTYPE html>
<html>
<head>
    <meta name="ac:name" content="AS Titles 09"/>
    <meta name="ac:short-desc" content=""/>
    <meta name="ac:desc" content=""/>
    <script src="https://cdn.anychart.com/js/7.10.0/anychart-bundle.min.js"></script>
    
    <link rel="stylesheet" type="text/css" href="https://cdn.anychart.com/css/7.10.0/anychart-ui.min.css" />
    
    <style>
        html, body, #container {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<div id="container"></div>
<script>
anychart.onDocumentReady(function() {
  
  // set stage
  var stage = anychart.graphics.create("container");
  var palette = anychart.palettes.distinctColors().items();
  
  // data for each person
  var john = anychart.data.set([
    {x: "2001", value: 3000},
    {x: "2002", value: 4000},
    {x: "2003", value: 3000}
  ]);
  var jake = anychart.data.set([
    {x: "2001", value: 2000},
    {x: "2002", value: 4000},
    {x: "2003", value: 6000}
  ]);
  var peter = anychart.data.set([
    {x: "2001", value: 10000},
    {x: "2002", value: 6000},
    {x: "2003", value: 2000}
  ]);
  
  function summarizer (salesData){
    var personSales = 0;
    for (var i=0;i<salesData.mapAs().getRowsCount();i++){
      personSales+=salesData.mapAs().get(i, "value");
    }
    return personSales;
  }
  
  // data for column chart
  var data = anychart.data.set([
    {x: "John", value: summarizer(john), clickData: john, fill: palette[0]},
    {x: "Jake", value: summarizer(jake), clickData: jake, fill: palette[1]},
    {x: "Peter", value: summarizer(peter), clickData: peter, fill: palette[2]}
  ]);
  
  var chart = anychart.column();
  
  chart.title("Sales Report");
  
  // set data and color
  var column = chart.column(data);
  column.name("Sales");
  column.stroke(null);
  
  column.listen(
    
    // listener type
    "pointClick",
    
    // function, if listener triggers
    function(e) {
      click(
data.mapAs().get(e.pointIndex, "clickData"),
data.mapAs().get(e.pointIndex, "x"),
data.mapAs().get(e.pointIndex, "fill")
      );
    });
  
  // draw
  chart.container(stage).draw();
  
  function click (fullData, name, fill) {
    chart.dispose();
    var chart = anychart.line();
    var line = chart.line(fullData);
    line.stroke(fill);
    chart.title("Sales details for "+name);
    chart.container(stage);
    chart.draw();
    
    var label= chart.label();
    // set title text
    label.text("Back to Sales Manager Report");
    // place title at the bottom
    label.position("bottomRight");
    // stick text to the right side
    label.anchor("bottomRight");
    // set text size
    label.fontSize(15);
    // set font family
    label.fontFamily("Tahoma");
    // unbold title
    label.fontWeight(400);
    // background settings
    var labelBackground = label.background();
    // eanble background
    labelBackground.enabled(true);
    // disable fill
    labelBackground.fill(null);
    // set black border to title
    labelBackground.stroke("#000000");
    
    // set container and draw title
    label.listen("click", function(){
      var chart = anychart.column();
      chart.title("Sales Report");
      var column = chart.column(data);
      column.stroke(null);
      column.name("Sales");
      column.listen(
"pointClick",
function(e) {
  click(
    data.mapAs().get(e.pointIndex, "clickData"),
    data.mapAs().get(e.pointIndex, "x"),
    data.mapAs().get(e.pointIndex, "fill")
  );
});
      chart.container(stage);
      chart.draw();
      label.dispose();
    });
  }
});
</script>
</body>
</html>