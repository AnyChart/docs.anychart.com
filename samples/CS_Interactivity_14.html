<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="tags" content="[]"/>
    <meta name="index" content="1000"/>
    <meta name="is-new" content="false"/>
    <script src="../anychart-bundle.min.js"></script>
    <script x-export="chart">var chart, pie, stage;
anychart.onDocumentReady(function() {

// set stage
    stage = anychart.graphics.create('container');

// data
    var data = anychart.data.set([
        ['Velma', 10, '#AB3300', 4, 3, 7, 1, 0],
        ['Fred', 12, '#66A3FF', 2, 4, 4, 0, 0],
        ['Daphne', 18, '#570FBD', 2, 3, 4, 0, 0],
        ['Shaggy', 6, '#948F45', 1, 1, 1, 4, 0],
        ['Scooby', 46, '#784512', 1, 1, 2, 1, 46]
    ]);

    var pieTitle = 'And who helped them';
    var pieSubTitle = '...';

// map data for the each series
    var dataMapping = data.mapAs({x: [0], value: [1], fill:[2]});

// chart type
    chart = anychart.column();

// set data
    var series = chart.column(dataMapping); // set series data

// chart title
    chart.title().useHtml(true);
    chart.title('<span style="color:#545f69; font-size: 18px;">How many pieces of pizza have they eaten?</span><br><span style="color:#545f69; font-size: 10px">Click on the bars.</span>');

// set axes titles
    chart.xAxis().title().text('Retail Channel');
    chart.yAxis().title().text('Sales');

// enable legend
    chart.legend().enabled(false);

// switching the select mode to multi
    chart.interactivity().selectionMode('singleSelect');

    chart.bounds('0','0', '50%', '100%');

    var c0 = false;
    var c1 = false;
    var c2 = false;
    var c3 = false;
    var c4 = false;

    var x = chart.height*0.2;

    chart.listen('click', function(evt){
        var ind = evt.pointIndex;
        switch (ind) {
            case 0:
                console.log(c0);
                if (c0 == false) {
                    var pieVelmaDataMapping = data.mapAs({x: [0], fill: [2], value: [3]}); // Velmas pizza
                    var pieVelma = anychart.pie(pieVelmaDataMapping);
                    pieVelma.bounds('50%', 0, '50%', x);
                    pieVelma.background('none');
                    pieVelma.container(stage).draw();
                    var pieVelmaSubTitle = "\nto eat Velma's pizza";
                    c0 = true;
                    x = x + chart.height*0.2;
                } else {
                    c0 = false; // remove to unselect!!!
                    x = x - chart.height*0.2;
                }
                break;
            case 1:
                if (c1 == false) {
                    var pieFredDataMapping = data.mapAs({x: [0], fill: [2], value: [4]}); // Freds pizza
                    var pieFred = anychart.pie(pieFredDataMapping);
                    pieFred.title(pieTitle);
                    pieFred.bounds('50%', 0, '50%', x);
                    pieFred.background('none');
                    pieFred.container(stage).draw();
                    var pieFredSubTitle = "\nto eat Fred's pizza";
                    c1 = true;
                    x = x + chart.height*0.2;
                } else {
                    c1 = false; // remove to unselect!!!
                    x = x - chart.height*0.2;
                }
                break;
            case 2:
                if (c2 == false) {
                    var pieDaphneDataMapping = data.mapAs({x: [0], fill: [2], value: [5]}); // Daphnes pizza
                    var pieDaphne = anychart.pie(pieDaphneDataMapping);
                    pieDaphne.title(pieTitle);
                    pieDaphne.bounds('50%', 0, '50%', x);
                    pieDaphne.background('none');
                    pieDaphne.container(stage).draw();
                    var pieDaphneSubTitle = "\nto eat Daphne's pizza";
                    c2 = true;
                    x = x + chart.height*0.2;
                } else {
                    c2 = false; // remove to unselect!!!
                    x = x - chart.height*0.2;
                }
                break;
            case 3:
                if (c3 == false) {
                    var pieShaggyDataMapping = data.mapAs({x: [0], fill: [2], value: [6]}); // Shaggys pizza
                    var pieShaggy = anychart.pie(pieShaggyDataMapping);
                    pieShaggy.title(pieTitle);
                    pieShaggy.bounds('50%', 0, '50%', x);
                    pieShaggy.background('none');
                    pieShaggy.container(stage).draw();
                    var pieShaggySubTitle = "\nto eat Shaggy's pizza";
                    c3 = true;
                    x = x + chart.height*0.2;
                } else {
                    c3 = false; // remove to unselect!!!
                    x = x - chart.height*0.2;
                }
                break;
            case 4:
                if (c4 == false) {
                    var pieScoobyDataMapping = data.mapAs({x: [0], fill: [2], value: [7]}); // Scoobys sausages
                    var pieScooby = anychart.pie(pieScoobyDataMapping);
                    pieScooby.title(pieTitle);
                    pieScooby.bounds('50%', 0, '50%', x);
                    pieScooby.background('none');
                    pieScooby.container(stage).draw();
                    var pieScoobySubTitle = "... No one shared Scooby's sausages :(";
                    pieScooby.data(pieDataMapping);
                    pieScooby.title(pieTitle + pieSubTitle);
                    c4 = true;
                    x = x + chart.height*0.2;
                } else {
                    c4 = false; // remove to unselect!!!
                    x = x - chart.height*0.2;
                }
                break;
        }
    });
    console.log(c0);
// draw
    chart.container(stage).draw();
});</script>
</head>
<body>
<div id="container" style="width: 100%; height: 100%"></div>
</body>
</html>