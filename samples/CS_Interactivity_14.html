<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="tags" content="[]"/>
    <meta name="index" content="1000"/>
    <meta name="is-new" content="false"/>
    <script src="../anychart-bundle.min.js"></script>
    <script x-export="chart">var chart, lineChart, stage;
    anychart.onDocumentReady(function () {

    // set stage
    stage = anychart.graphics.create("container");

    // data
        var data = anychart.data.set([
            ["2000", 10048, 761, 530, 890, 979, 802, 835, 923, 922, 800, 913, 990, 703],
            ["2001", 10938, 886, 580, 990, 997, 837, 890, 1066, 922, 900, 965, 995, 910],
            ["2002", 9989,  832, 740, 912, 850, 780, 986, 932, 500, 708, 1235, 938, 546],
            ["2003", 10226, 904, 912, 914, 899, 868, 803, 1075, 1022, 920, 605, 937, 745],
            ["2004", 11004, 886, 980, 1090, 812, 850, 992, 986, 1032, 905, 800, 868, 803],
            ["2005", 10934, 902, 867, 830, 993, 1006, 847, 799, 1141, 902, 934, 785, 928],
            ["2006", 11275, 2878, 2933, 3561, 1903],
            ["2007", 11945, 2959, 3855, 3109, 2022],
            ["2008", 12245, 4001, 2156, 3928, 2160],
            ["2009", 12056, 1995, 2057, 4902, 3102],
            ["2010", 11734, 2584, 3166, 3101, 2883],
            ["2011", 12337, 3106, 2845, 2933, 3453],
            ["2012", 12761, 3296, 2655, 3144, 3666],
            ["2013", 13390, 2611, 4194, 3206, 3379],
            ["2014", 13818, 3000, 2599, 4107, 4112],
            ["2015", 13188, 3199, 2564, 3118, 4307]
        ]);

    var pieTitle = "And who helped them";
    var pieSubTitle = "...";

    // map data for the each series
    var dataMapping = data.mapAs({x: [0], value: [1]});

    // chart type
    chart = anychart.column();
    lineChart = anychart.line();

    // set data
    var series = chart.column(dataMapping); // set series data
    
    series.name("Slices of pizza");

    // chart title
    chart.title().useHtml(true);
    chart.title('<span style="color:#545f69; font-size: 18px;">How many pieces of pizza have they eaten?</span><br><span style="color:#545f69; font-size: 10px">Click on the bars.</span>');

    // set axes titles
    chart.xAxis().title().text("Retail Channel");
    chart.yAxis().title().text("Sales");

    // enable legend
    chart.legend().enabled(false);

    // switching the select mode to multi
    chart.interactivity().selectionMode("multiSelect");

    chart.bounds("0", "0", "50%", "100%");
    
    // Velmas pizza
    var lineVelmaDataMapping = data.mapAs({x: [0], fill: [2], value: [3]});
    var lineVelma = lineChart.line(lineVelmaDataMapping);
    lineVelma.enabled(false);
    
    // Freds pizza
    var lineFredDataMapping = data.mapAs({x: [0], fill: [2], value: [4]}); 
    var lineFred = lineChart.line(lineFredDataMapping);
    lineFred.enabled(false);
    
    // Daphnes pizza
    var lineDaphneDataMapping = data.mapAs({x: [0], fill: [2], value: [5]}); 
    var lineDaphne = lineChart.line(lineDaphneDataMapping);
    lineDaphne.enabled(false);
    
    // Shaggys pizza
    var lineShaggyDataMapping = data.mapAs({x: [0], fill: [2], value: [6]}); 
    var lineShaggy = lineChart.line(lineShaggyDataMapping);
    lineShaggy.enabled(false);
    
    // Scoobys sausages
    var lineScoobyDataMapping = data.mapAs({x: [0], fill: [2], value: [7]}); 
    var lineScooby = lineChart.line(lineScoobyDataMapping);
    lineScooby.enabled(false);

        var dataRow;
        var lineDataSet = anychart.data.set([
            {x: "John", value: dataRow[2], fill: "#0099CC"},
            {x: "James", value: dataRow[3], fill: "#520085"},
            {x: "Peter", value: dataRow[4], fill: "#CC6600"},
            {x: "Mattew", value: dataRow[5], fill: "#336600"}
        ]);
        console.log(dataRow);

        line = anychart.line(lineDataSet);
        line.titlepieTitle;

        var lineSubTitle;

        chart.listen("pointClick", function(evt){
            var ind = evt.pointIndex;
            switch (ind) {
                case 0:
                    // 2000
                    dataRow = data.row(0);
                    lineDataSet.data([
                        {x: "Jan", value: dataRow[3], fill: "#0099CC"},
                        {x: "Feb", value: dataRow[4], fill: "#520085"},
                        {x: "Mar", value: dataRow[5], fill: "#CC6600"},
                        {x: "Apr", value: dataRow[6], fill: "#336600"},
                        {x: "May", value: dataRow[7], fill: "#0099CC"},
                        {x: "Jun", value: dataRow[8], fill: "#520085"},
                        {x: "Jul", value: dataRow[9], fill: "#CC6600"},
                        {x: "Aug", value: dataRow[4], fill: "#520085"},
                        {x: "Sep", value: dataRow[5], fill: "#CC6600"},
                        {x: "Oct", value: dataRow[6], fill: "#336600"},
                        {x: "Nov", value: dataRow[7], fill: "#0099CC"},
                        {x: "Dec", value: dataRow[8], fill: "#520085"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 1:
                    // 2001
                    dataRow = data.row(1);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 2:
                    // 2002
                    dataRow = data.row(2);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 3:
                    // 2003
                    dataRow = data.row(3);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 4:
                    // 2004
                    dataRow = data.row(4);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 5:
                    // 2005
                    dataRow = data.row(5);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 6:
                    // 2006
                    dataRow = data.row(6);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 7:
                    // 2007
                    dataRow = data.row(7);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 8:
                    // 2008
                    dataRow = data.row(8);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 9:
                    // 2009
                    dataRow = data.row(9);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 10:
                    // 2010
                    dataRow = data.row(10);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 11:
                    // 2011
                    dataRow = data.row(11);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 12:
                    // 2012
                    dataRow = data.row(12);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 13:
                    // 2013
                    dataRow = data.row(13);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 14:
                    // 2014
                    dataRow = data.row(14);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
                case 15:
                    // 2015
                    dataRow = data.row(15);
                    lineDataSet.data([
                        {x: "John", value: dataRow[2], fill: "#0099CC"},
                        {x: "James", value: dataRow[3], fill: "#520085"},
                        {x: "Peter", value: dataRow[4], fill: "#CC6600"},
                        {x: "Mattew", value: dataRow[5], fill: "#336600"}
                    ]);
                    lineSubTitle = "\nfor "+ dataRow[0] + " year";
                    break;
            }
            line.data(lineDataSet);
            line.title(pieTitle + lineSubTitle);
        });
    // draw
    chart.container(stage).draw();
});</script>
</head>
<body>
<div id="container" style="width: 100%; height: 100%"></div>
</body>
</html>
