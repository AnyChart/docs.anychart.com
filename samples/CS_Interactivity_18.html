<!DOCTYPE html>
<html>
    <meta charset="UTF-8">
    <meta name="ac:name" content="CS Interactivity 18"/>
    <meta name="ac:short-desc" content=""/>
    <meta name="ac:desc" content=""/>
    
    <script src="https://cdn.anychart.com/releases/8.1.0/js/anychart-base.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.1.0/js/anychart-exports.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.1.0/js/anychart-ui.min.js"></script>
    
    <link rel="stylesheet" type="text/css" href="https://cdn.anychart.com/releases/8.1.0/css/anychart-ui.min.css" />
    
    <style>
        html, body, #container {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        .custom-tooltip {
            visibility: hidden;
            pointer-events: none;
            position: absolute;
            height: 150px;
            width: 320px;
            border: solid #d8d8d8 1px;
            background: #fff;
        }
    </style>
</head>
<body>
<div id="tooltip" class="custom-tooltip"></div>
<div id="container"></div>
<script>
anychart.onDocumentReady(function () {

  // create data
  var data = anychart.data.set([
    ["2000", 10048, 2600, 3200, 2159, 2089],
    ["2001", 10938, 2367, 1989, 2383, 4199],
    ["2002", 9989, 2156, 2399, 2867, 2567],
    ["2003", 10226, 2398, 2225, 3010, 2593],
    ["2004", 11004, 2851, 3007, 2805, 2341],
    ["2005", 10934, 3400, 2105, 2563, 2866],
    ["2006", 11275, 2878, 2933, 3561, 1903],
    ["2007", 11945, 2959, 3855, 3109, 2022],
    ["2008", 12245, 4001, 2156, 3928, 2160],
    ["2009", 12056, 1995, 2057, 4902, 3102],
    ["2010", 11734, 2584, 3166, 3101, 2883],
    ["2011", 12337, 3106, 2845, 2933, 3453],
    ["2012", 12761, 3296, 2655, 3144, 3666],
    ["2013", 13390, 2611, 4194, 3206, 3379],
    ["2014", 13818, 3000, 2599, 4107, 4112],
    ["2015", 13188, 3199, 2564, 3118, 4307]
  ]);

  // map the data
  var dataMapping = data.mapAs({x: 0, value: 1});

  // create a chart
  var chart = anychart.column();

  // set the data
  var column = chart.column(dataMapping);

  // disable default tooltips
  column.tooltip(false);

  // disable the selection mode
  chart.interactivity().selectionMode("none");

  // set the titles of the axes
  chart.xAxis().title("Retail Channel");
  chart.yAxis().title("Sales");

  // set the chart title
  chart.title("Volume of Sales (ACME Corp.)");

  var tooltip = document.getElementById("tooltip");
  var barChart = anychart.bar();
  var barSeries = barChart.bar([0]);

  // create and configure a tooltip chart
  function createTooltipChart() {

    // configure axes
    barChart.xAxis().stroke(null);
    barChart.xAxis().ticks(false);
    barChart.xAxis().labels().fontSize(10);
    barChart.yAxis().fontSize(10);

    // configure the title
    barChart.title().fontSize(12);

    // set the padding
    barChart.padding([0, 12, 0, 0]);

    // set the container id
    barChart.container("tooltip");

    // initiate drawing the chart
    barChart.draw();
  }

  /* show a custom tooltip
  when the mouse is over a column */
  chart.listen("pointMouseOver", function(e) {

    // show the tooltip
    tooltip.style.visibility = "visible"; 

    var dataRow = data.row(e.pointIndex);

    // set new data for the tooltip chart
    barSeries.data([
      {x: "John", value: dataRow[2]},
      {x: "James", value: dataRow[3]},
      {x: "Peter", value: dataRow[4]},
      {x: "Mattew", value: dataRow[5]}
    ]);

    // set the chart title
    barChart.title("Personal Sales: " + dataRow[0]);
  });

  /* hide the custom tooltip
  when the mouse is out of a column */
  chart.listen("pointMouseOut", function () {
    tooltip.style.visibility = "hidden";
  });

  // set the position of custom tooltips
  chart.listen("mouseMove", function(e) {

    // prevent tooltips from leaving the screen
    var container = (this.container().getStage().container());
    var clientX = e["clientX"] - container.offsetLeft;
    var clientY = e["clientY"] - container.offsetTop;
    var left = (clientX - 10) - tooltip.offsetWidth / 2;
    if (left + tooltip.offsetWidth > chart.container().offsetWidth) {
      left = chart.container().offsetWidth - 2 - tooltip.offsetWidth;
    }
    if (left < 0) {
      left = 0;
    }

    // get the mouse position and move a tooltip
    tooltip.style.left = left;
    tooltip.style.top = clientY - tooltip.offsetHeight - 10 + "px";
  });

  // set the container id
  chart.container("container");

  // initiate drawing the chart
  chart.draw();
});
</script>
</body>
</html>