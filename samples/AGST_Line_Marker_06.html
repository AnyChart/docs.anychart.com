<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="tags" content="[]"/>
    <meta name="index" content="1000"/>
    <meta name="is-new" content="false"/>
    <script src="../anychart-bundle.min.js"></script>
    <script x-export="chart">anychart.onDocumentReady(function() {

  // define chart
  var chart = anychart.financial();

  chart.title("Monthly Iranian crudle oil production");

  // crosshair settings
  var crosshair = chart.crosshair();
  // enable crosshair
  crosshair.enabled(true);
  // set custom function for formatting x crossshair label
  var xCrossLabel = crosshair.xLabel();
  xCrossLabel.textFormatter(function(){
    // get label data
    var date = new Date(this.rawValue);
    // get month from date
    var month = date.toLocaleDateString("en-US", {month: "long"});
    // get day from date
    var day = date.toLocaleDateString("en-US", {day: "numeric"});
    // get year from date
    var year = date.toLocaleDateString("en-US", {year: "numeric"});
    // format label content
    return month + " " + day + ", " + year;
  });
  // set custom function for formatting y crossshair label
  var yCrossLabel = crosshair.yLabel();
  yCrossLabel.enabled(false);

  crosshair.yStroke(null);

  var xScale = chart.xScale();
  xScale.minimum(Date.UTC(2011, 0, 1));
  xScale.maximum(Date.UTC(2018, 0, 1));
  var xTicks = chart.xScale().ticks();
  xTicks.interval(0,4);
  var xLabels = chart.xAxis().labels();
  xLabels.textFormatter(function(){
    var date = new Date(this["tickValue"]);
    var options = {month: "short", year: "numeric"};
    return date.toLocaleDateString("en-US", options);
  });

  var yLabels = chart.yAxis().labels();
  yLabels.textFormatter(function(){
    return this.value.toFixed(1);
  });

  var yScale = chart.yScale();
  yScale.minimum(0);

  chart.xScroller(true);
  var xZoom = chart.xZoom();
  xZoom.setToValues(Date.UTC(2011, 0, 1), Date.UTC(2015, 0, 1));


      // set series data
  var series = chart.line([
    {x: Date.UTC(2011, 0, 01), value: 3.7},
    {x: Date.UTC(2011, 1, 01), value: 3.7},
    {x: Date.UTC(2011, 2, 01), value: 3.7},
    {x: Date.UTC(2011, 3, 01), value: 3.6},
    {x: Date.UTC(2011, 4, 01), value: 3.6},
    {x: Date.UTC(2011, 5, 01), value: 3.5},
    {x: Date.UTC(2011, 6, 01), value: 3.4},
    {x: Date.UTC(2011, 7, 01), value: 3.4},
    {x: Date.UTC(2011, 8, 01), value: 3.5},
    {x: Date.UTC(2011, 9, 01), value: 3.3},
    {x: Date.UTC(2011, 10, 01), value: 3.3},
    {x: Date.UTC(2011, 11, 01), value: 3.2},
    {x: Date.UTC(2012, 0, 01), value: 3.2},
    {x: Date.UTC(2012, 1, 01), value: 3.2},
    {x: Date.UTC(2012, 2, 01), value: 3.1},
    {x: Date.UTC(2012, 3, 01), value: 3.1},
    {x: Date.UTC(2012, 4, 01), value: 3.1},
    {x: Date.UTC(2012, 5, 01), value: 3.0},
    {x: Date.UTC(2012, 6, 01), value: 3.0},
    {x: Date.UTC(2012, 7, 01), value: 2.9},
    {x: Date.UTC(2012, 8, 01), value: 2.9},
    {x: Date.UTC(2012, 9, 01), value: 2.8},
    {x: Date.UTC(2012, 10, 01), value: 2.7},
    {x: Date.UTC(2012, 11, 01), value: 2.7},
    {x: Date.UTC(2013, 0, 01), value: 2.6},
    {x: Date.UTC(2013, 1, 01), value: 2.6},
    {x: Date.UTC(2013, 2, 01), value: 2.7},
    {x: Date.UTC(2013, 3, 01), value: 2.7},
    {x: Date.UTC(2013, 4, 01), value: 2.7},
    {x: Date.UTC(2013, 5, 01), value: 2.7},
    {x: Date.UTC(2013, 6, 01), value: 2.7},
    {x: Date.UTC(2013, 7, 01), value: 2.7},
    {x: Date.UTC(2013, 8, 01), value: 2.7},
    {x: Date.UTC(2013, 9, 01), value: 2.7},
    {x: Date.UTC(2013, 10, 01), value: 2.7},
    {x: Date.UTC(2013, 11, 01), value: 2.7},
    {x: Date.UTC(2014, 0, 01), value: 2.7},
    {x: Date.UTC(2014, 1, 01), value: 2.75},
    {x: Date.UTC(2014, 2, 01), value: 2.8},
    {x: Date.UTC(2014, 3, 01), value: 2.85},
    {x: Date.UTC(2014, 4, 01), value: 2.9},
    {x: Date.UTC(2014, 5, 01), value: 2.9},
    {x: Date.UTC(2014, 6, 01), value: 2.9},
    {x: Date.UTC(2014, 7, 01), value: 2.9},
    {x: Date.UTC(2014, 8, 01), value: 2.9},
    {x: Date.UTC(2014, 9, 01), value: 2.9},
    {x: Date.UTC(2014, 10, 01), value: 2.9},
    {x: Date.UTC(2014, 11, 01), value: 2.9},
    {x: Date.UTC(2015, 0, 01), value: 2.9},
    {x: Date.UTC(2015, 1, 01), value: 2.9},
    {x: Date.UTC(2015, 2, 01), value: 2.9},
    {x: Date.UTC(2015, 3, 01), value: 2.9},
    {x: Date.UTC(2015, 4, 01), value: 2.9},
    {x: Date.UTC(2015, 5, 01), value: 2.9},
    {x: Date.UTC(2015, 6, 01), value: 2.9},
    {x: Date.UTC(2015, 7, 01), value: 2.9},
    {x: Date.UTC(2015, 8, 01), value: 2.9},
    {x: Date.UTC(2015, 9, 01), value: 2.9},
    {x: Date.UTC(2015, 10, 01), value: 2.9},
    {x: Date.UTC(2015, 11, 01), value: 2.9},
    {x: Date.UTC(2016, 0, 01), value: 2.9},
    {x: Date.UTC(2016, 1, 01), value: 2.9, valueError: "0.5%"},
    {x: Date.UTC(2016, 2, 01), value: 2.9, valueError: "0.5%"},
    {x: Date.UTC(2016, 3, 01), value: 2.95, valueError: "1%"},
    {x: Date.UTC(2016, 4, 01), value: 3.0, valueError: "1%"},
    {x: Date.UTC(2016, 5, 01), value: 3.0, valueError: "1%"},
    {x: Date.UTC(2016, 6, 01), value: 3.05, valueError: "1.5%"},
    {x: Date.UTC(2016, 7, 01), value: 3.1, valueError: "1.5%"},
    {x: Date.UTC(2016, 8, 01), value: 3.1, valueError: "1.5%"},
    {x: Date.UTC(2016, 9, 01), value: 3.1, valueError: "1.5%"},
    {x: Date.UTC(2016, 10, 01), value: 3.1, valueError: "2%"},
    {x: Date.UTC(2016, 11, 01), value: 3.2, valueError: "2%"},
    {x: Date.UTC(2017, 0, 01), value: 3.25, valueError: "2%"},
    {x: Date.UTC(2017, 1, 01), value: 3.3, valueError: "2.5%"},
    {x: Date.UTC(2017, 2, 01), value: 3.35, valueError: "2.5%"},
    {x: Date.UTC(2017, 3, 01), value: 3.375, valueError: "2.5%"},
    {x: Date.UTC(2017, 4, 01), value: 3.4, valueError: "3%"},
    {x: Date.UTC(2017, 5, 01), value: 3.425, valueError: "3.5%"},
    {x: Date.UTC(2017, 6, 01), value: 3.45, valueError: "3.5%"},
    {x: Date.UTC(2017, 7, 01), value: 3.475, valueError: "3.5%"},
    {x: Date.UTC(2017, 8, 01), value: 3.5, valueError: "4%"},
    {x: Date.UTC(2017, 9, 01), value: 3.525, valueError: "4%"},
    {x: Date.UTC(2017, 10, 01), value: 3.55, valueError: "5%"},
    {x: Date.UTC(2017, 11, 01), value: 3.575, valueError: "4.5%"},
    {x: Date.UTC(2018, 0, 01), value: 3.6, valueError: "5%"}
  ]);

  series.tooltip().title(false).separator(false).textFormatter(function(){
    var value = this.value.toFixed(3);
    if (this.valueLowerError !==0 )
      value = this.value.toFixed(3) + "Â±" + this.valueLowerError.toFixed(3);
    return "Date: " + new Date(this.x).toLocaleDateString("en-US", {month: "short", year: "numeric"}) + "\n" + value + " million barrels per day";
  });

  var hoverMarkers = series.hoverMarkers();
  hoverMarkers.size(3);

  chart.interactivity("byX");

  var marker = chart.lineMarker();
  marker.value(Date.UTC(2016, 1, 01));
  marker.layout("vertical");
  marker.scale(chart.xScale());

  var text = chart.textMarker();
  text.value(Date.UTC(2016, 1, 01));
  text.layout("vertical");
  text.scale(chart.xScale());
  text.text("forecast");
  text.align("top");
  text.anchor("topLeft");
  text.offsetX(3);
  text.rotation(0);

  var label = chart.label();
  label.text("<a style=\"color: #51AF14;\"><b>crudle oil</font><br>forecast</b></a> and<br><b>range of<br>uncertainty</b>");
  label.position("rightCenter");
  label.anchor("rightCenter");
  label.offsetX(10);
  label.offsetY(-20);
  label.useHtml(true);

  // draw chart
  chart.container("container");
  chart.draw();
});</script>
</head>
<body>
<div id="container" style="width: 100%; height: 100%"></div>
</body>
</html>
