<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="tags" content="[]"/>
    <meta name="index" content="1000"/>
    <meta name="is-new" content="false"/>
    <script src="../anychart-bundle.min.js"></script>
    <script x-export="chart">var chart, pie, stage;
    anychart.onDocumentReady(function() {

    // set stage
    stage = anychart.graphics.create("container");

    // data
    var data = anychart.data.set([
        ["Velma", 10, "#AB3300", 4, 3, 7, 1, 0],
        ["Fred", 12, "#66A3FF", 2, 4, 4, 0, 0],
        ["Daphne", 18, "#570FBD", 2, 3, 4, 0, 0],
        ["Shaggy", 6, "#948F45", 1, 1, 1, 4, 0],
        ["Scooby", 46, "#784512", 1, 1, 2, 1, 46]
    ]);

    var pieTitle = "And who helped them";
    var pieSubTitle = "...";

    // map data for the each series
    var dataMapping = data.mapAs({x: [0], value: [1], fill:[2]});

    // chart type
    chart = anychart.column();

    // set data
    var series = chart.column(dataMapping); 

    // chart title
    chart.title().useHtml(true);
    chart.title('<span style="color:#545f69; font-size: 18px;">How many pieces of pizza have they eaten?</span><br><span style="color:#545f69; font-size: 10px">Click on the bars.</span>');

    // set axes titles
    chart.xAxis().title().text("Retail Channel");
    chart.yAxis().title().text("Sales");

    // enable legend
    chart.legend().enabled(false);

    // switching the select mode to multi
    chart.interactivity().selectionMode("singleSelect");

    chart.bounds("0","0", "50%", "100%");

    pie = anychart.pie(pieDataMapping);
    pie.title(pieTitle);
    
    var pieDataMapping = data.mapAs({x:[0], fill:[2], value:[3]});

    chart.listen("pointSelect", function(evt){
        var ind = evt.pointIndex;
        switch (ind) {
            case 0:
                pieDataMapping = data.mapAs({x:[0], fill:[2], value:[3]}); // Velmas pizza
                pieSubTitle = "\nto eat Velma"s pizza";
                break;
            case 1:
                pieDataMapping = data.mapAs({x:[0], fill:[2], value:[4]}); // Freds pizza
                pieSubTitle = "\nto eat Fred"s pizza";
                break;
            case 2:
                pieDataMapping = data.mapAs({x:[0], fill:[2], value:[5]}); // Daphnes pizza
                pieSubTitle = "\nto eat Daphne"s pizza";
                break;
            case 3:
                pieDataMapping = data.mapAs({x:[0], fill:[2], value:[6]}); // Shaggys pizza
                pieSubTitle = "\nto eat Shaggy"s pizza";
                break;
            case 4:
                pieDataMapping = data.mapAs({x:[0], fill:[2], value:[7]}); // Scoobys sausages
                pieSubTitle = "... No one shared Scooby"s sausages :(";
                break;
        }
        pie.data(pieDataMapping);
        pie.title(pieTitle + pieSubTitle);
    });

    pie.bounds("50%", 0, "50%", "100%");
    pie.background("none");

    // draw
    chart.container(stage).draw();
    pie.container(stage).draw();
});</script>
</head>
<body>
<div id="container" style="width: 100%; height: 100%"></div>
</body>
</html>
