<!DOCTYPE html>
<html>
    <meta charset="UTF-8">
    <meta name="ac:name" content="Data Tree 07"/>
    <meta name="ac:short-desc" content=""/>
    <meta name="ac:desc" content=""/>
    
    <script src="https://cdn.anychart.com/releases/{{branch-name}}/js/anychart-base.min.js"></script>
    <script src="https://cdn.anychart.com/releases/{{branch-name}}/js/anychart-treemap.min.js"></script>
    <script src="https://cdn.anychart.com/releases/{{branch-name}}/js/anychart-exports.min.js"></script>
    <script src="https://cdn.anychart.com/releases/{{branch-name}}/js/anychart-ui.min.js"></script>
    
    <link rel="stylesheet" type="text/css" href="https://cdn.anychart.com/releases/{{branch-name}}/css/anychart-ui.min.css" />
    
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #container {
            position: absolute;
            width: 100%;
            top: 25px;
            bottom: 0;
        }
    </style>
</head>
<body>
<button onclick="nextNode()">Get next node and drill to it</button>
<div id="container"></div>
<script>
anychart.onDocumentReady(function () {

    // create treemap
    chart = anychart.treeMap();
    
    // setting the maximum levels depth
    chart.maxDepth(4);
    
    // set title
    chart.title("Traversing sample: click button to get next item and drill to it");

    // data
    var rawData = [
      {name: 'Eurasia',
      children:[
        {name: "Asia", children:[
           {name: "Eastern Asia", value: "7"},
           {name: "Western Asia", value: "19"},
           {name: "Southern Asia", value: "8"},
           {name: "South-Eastern Asia", value: "11"},
           {name: "Central Asia", value: "5"}
        ]},
        {name: "Europe", children: [
           {name: "Eastern Europe", value: "10"},
           {name: "Western Europe", value: "18"},
           {name: "Southern Europe", value: "5"},
           {name: "Northern Europe", value: "10"},                        
        ]}
      ]}
    ];

    data =  anychart.data.tree(rawData, "as-tree");
    
    // get traverser of a tree
    traverser = data.getTraverser();
    // skip root node first time so the first click didn't seem useless
    traverser.advance()          
    
    // set up label
    chart.labels().format("{%name}\n({%value} countries)");

    // set data to a chart
    chart.data(data);
    
    // set container and draw chart
    chart.container("container");
    chart.draw();
});

// get next node and drill to it
function nextNode() {
  // try to go to the next node in a tree
  if (traverser.advance()) {
    // if successuful - get current node as a data item instance
    var dataItem = traverser.current();
    // drill down to this item
    chart.drillTo(dataItem);
  }
  else {
    // if we can't advance any more - reset the traverser
    traverser.reset();
  }
};    
</script>
</body>
</html>